{"version":3,"file":"file-uploader.component.js","sourceRoot":"","sources":["file:///C:/wamp64/www/ingatlanlotto/winner_front/tmp/broccoli_type_script_compiler-input_base_path-mAvDBbB3.tmp/0/src/app/components/ckeditor/file-uploader/file-uploader.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {ErrorService} from \"../../../globals/services/error.service\";\nimport {APIService} from \"../../../globals/services/API.service\";\nimport {AuthService} from \"../../../globals/services/auth.service\";\nimport {MultipartItem} from \"../../../utils/multipart-upload/multipart-item\";\nimport {MultipartUploader} from \"../../../utils/multipart-upload/multipart-uploader\";\nimport {globals} from \"../../../utils/global.constats\";\nconst URL = globals.backendIp + 'api/ckeditor/fileupload';\ninterface ImgParam {\n\n    width?:number;\n    subdir?:string;\n\n}\n@Component({\n    moduleId: module.id,\n    selector: 'app-file-uploader',\n    templateUrl: 'file-uploader.component.html',\n    styleUrls: ['file-uploader.component.css'],\n    inputs: ['PATH','INDEX','imgParams'],\n\n\n})\n\nexport class FileUploaderComponent implements OnInit {\n    private uploader:MultipartUploader = new MultipartUploader({url: URL});\n    multipartItem:MultipartItem = new MultipartItem(this.uploader);\n    host:string = globals.backendIp;\n    PATH:string=''; //A szerverena kép gyökér utvonala\n    INDEX:string='';//a képlita indexe, ezek töltődnek be\n    filename:string; //a file neve ha nem adja meg akkor eredeti marad\n    imgParams:Array<ImgParam>;\n\n    file:File;\n    imageList:any[] = [];\n\n    constructor(private _ErrorService:ErrorService,\n                private _ApiService:APIService,\n                private _AuthService:AuthService) {\n\n        this.uploadCallback = (data) => {\n\n            this.file = null;\n            if (data) {\n                this.loadImageList();\n                // console.debug(\"home.ts & uploadCallback() upload file success.\");\n            } else {\n                console.error(\"home.ts & uploadCallback() upload file false.\");\n            }\n        }\n\n    }\n\n    ngOnInit() {\n        this.loadImageList();\n    }\n\n    loadImageList() {\n        this._ApiService.getResponseGET('api/ckeditor/images/'+this.INDEX,'').subscribe(\n                data=> {\n                this.imageList = data;\n                console.log(data);\n            },\n                error=> {\n                console.log(error);\n            })\n    }\n\n    onKepfeltoltes($event):void {\n        // console.log('uj file');\n        var inputValue = $event.target;\n        if (null == inputValue || null == inputValue.files[0]) {\n            //  console.debug(\"Input file error.\");\n            return;\n        } else {\n            this.file = inputValue.files[0];\n            // console.debug(\"Input File name: \" + this.file.name + \" type:\" + this.file.size + \" size:\" + this.file.size);\n            this.upload();\n        }\n    }\n\n    upload() {\n\n        if (null == this.file) {\n            console.error(\"home.ts & upload() form invalid.\");\n            return;\n        }\n        if (this.multipartItem == null) {\n            this.multipartItem = new MultipartItem(this.uploader);\n        }\n        if (this.multipartItem.formData == null)\n            this.multipartItem.formData = new FormData();\n\n\n\n        this.multipartItem.formData.append(\"file\", this.file);\n        this.multipartItem.formData.append(\"PATH\", this.PATH);\n        this.multipartItem.formData.append(\"INDEX\", this.INDEX);\n        this.multipartItem.formData.append(\"filename\", this.filename);\n        this.multipartItem.formData.append(\"params\", JSON.stringify(this.imgParams));\n        this.multipartItem.formData.append(\"access_token\", this._AuthService.user.access_token);\n        this.multipartItem.callback = this.uploadCallback;\n        this.multipartItem.upload();\n    }\n\n    uploadCallback:(data) => void;\n    hint(){\n        alert('A képed egérrel húzd át a szerkesztőbe!');\n    }\n    deletePicture(pic){\n        var txt;\n        var r = confirm(\"Biztosan törlöd a képet?\");\n        if (r == true) {\n            this._ApiService.getResponsePUT('api/ckeditor/filedelete/'+pic.id,{akarmi:'aní'}).subscribe(\n                            data=> {\n                                console.log(data);\n                            this.loadImageList();\n\n                        },\n                            error=> {\n                                console.log(error);\n\n                        })\n        } else {\n\n        }\n    }\n\n;\n}\n"]}