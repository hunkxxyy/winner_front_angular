{"version":3,"file":"dynamic.component.js","sourceRoot":"","sources":["file:///C:/wamp64/www/ingatlanlotto/winner_front/tmp/broccoli_type_script_compiler-input_base_path-HdRV4ODo.tmp/0/src/app/views/dynamic/dynamic.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component,OnInit,OnDestroy} from '@angular/core';\nimport {ErrorService} from \"../../globals/services/error.service\";\nimport {APIService} from  '../../globals/services/API.service';\nimport {HunkRichTextComponent} from  '../../components/hunk-richtexteditor/hunkRichTexteditor.component';\nimport { DomSanitizationService, SafeHtml } from '@angular/platform-browser';\nimport {Subscription} from'rxjs/RX';\nimport {ActivatedRoute,Router} from '@angular/router';\n@Component({\n  selector: 'dynamic',\n  template: `\n    <div class=\"site-showcase\"  [innerHtml]=\"getBanner()\">\n    <!-- Start Page Header -->\n\n    <!-- End Page Header -->\n</div>\n\n        <div class=\"container\">\n            <div class=\"page\">\n\n                 <hunk-richtext\n                 [htmlcontent]=\"loadContent()\"\n                 (saved)=\"onsaved($event)\"\n                 ></hunk-richtext>\n            </div>\n        </div>\n\n\n    `,\n  directives: [HunkRichTextComponent],\n  styleUrls: [\"\"],\n  providers: [APIService, ErrorService]\n})\nexport class DynamicComponent implements OnDestroy {\n  private subscription:Subscription;\n  contents:Array<any>;\n  linkId:string;\n  currentId:any;\n  banner:Array<any>;\n\n  constructor(private domSanitizationService:DomSanitizationService,\n              private _ErrorService:ErrorService,\n              private _ApiService:APIService,\n              private _ActivatedRoute:ActivatedRoute) {\n    this.loadAllContents();\n    this.setBanner();\n    this.subscription = this._ActivatedRoute.params.subscribe(\n      (param:any)=>this.linkId = param['id']\n    )\n  }\n\n  loadAllContents() {\n    this._ApiService.getResponseGET('Szintek/tartalom/all', '').subscribe(\n        data=> {\n        console.log(data);\n        this.contents = data;\n\n      },\n        error=> {\n        console.log(error);\n      })\n\n  }\n\n;\n\n  loadContent() {\n    let content = '';\n    if (this.contents) {\n\n      this.contents.forEach((obj, index)=> {\n        if (obj.link == this.linkId) {\n          this.currentId=obj.id;\n          content = obj.szoveg;\n\n        }\n      });\n    }\n\n    return content;\n  }\n\n\n  setBanner() {\n    this.banner=[\n      {\n        link: 'bemutatkozas',\n        banner: `<div class=\"parallax page-header\" style=\"background-image:url('template/images/aboutus.png');\"><div class=\"container\"><div class=\"row\"><div class=\"col-md-12\"><h1>Bemutatkozás</h1></div></div></div></div>`\n      },\n      {\n        link: 'jatekszabaly',\n        banner: `<div class=\"parallax page-header\" style=\"background-image:url('template/images/rules2.png');\"><div class=\"container\"><div class=\"row\"><div class=\"col-md-12\"><h1 style=\" text-shadow: 2px 2px #333333;\" >Játékszabály</h1></div></div></div></div>`\n      }\n    ]\n  }\n\n  getBanner() {\n\n    let content = '';\n    if (this.contents) {\n\n      this.banner.forEach((obj, index)=> {\n        if (obj.link == this.linkId) {\n\n          content = obj.banner;\n\n        }\n      });\n    }\n\n    return this.domSanitizationService.bypassSecurityTrustHtml(content);\n  }\n\n  onsaved(source) {\n    //   alert(source);\n    const content = {szoveg: source};\n    this._ApiService.getResponse('Szintek/tartalom/' + this.currentId, content).subscribe(\n        data=> {\n          this.contents.forEach((obj, index)=> {\n            if (obj.id == this.currentId.id) {\n              this.contents[index].szoveg=content;\n\n            }\n          });\n      },\n        error=> {\n        console.log(error);\n      })\n    console.log(source);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n}\n"]}