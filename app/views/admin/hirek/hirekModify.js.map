{"version":3,"file":"hirekModify.js","sourceRoot":"","sources":["file:///C:/wamp64/www/ingatlanlotto/winner_front/tmp/broccoli_type_script_compiler-input_base_path-mAvDBbB3.tmp/0/src/app/views/admin/hirek/hirekModify.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport {ErrorService} from \"../../../globals/services/error.service\";\nimport {AdminHirekHeaderComponent} from \"./header.component\";\nimport {APIService} from \"../../../globals/services/API.service\";\nimport {AuthService} from \"../../../globals/services/auth.service\";\nimport {HirekDeffault} from \"./hirekDeffault\";\nimport {globals} from \"../../../utils/global.constats\";\nimport {hunkDate} from \"../../../globals/pipes/hunkDate.pipe\";\nimport {DateTimePickerComponent} from \"../../../components/date-time-picker/DateTimePicker.component\";\nimport {CkeditorComponent} from \"../../../components/ckeditor/ckeditor.component\";\n\nconst URL = globals.backendIp + 'api/hirek_kepek';\n@Component({\n    moduleId:  module.id,\n    selector: 'hirek-modify',\n    templateUrl: 'hirekModify.html',\n    directives: [AdminHirekHeaderComponent,DateTimePickerComponent,CkeditorComponent],\n    styleUrls: ['hirek-modify.css'],\n    providers: [APIService],\n    pipes:[hunkDate]\n})\nexport class HirekModifyComponent implements OnInit {\n    news:HirekDeffault;\n    newsId:number;\n    positions:Array<number>;\n    modifying:any;\n    file:File;\n    ckeditorAvaible:boolean=false;\n    constructor(private _ErrorService:ErrorService,\n                private _ApiSrvice:APIService,\n                private _AuthService:AuthService,\n                private _RouteParams:ActivatedRoute) {\n        this.news=new HirekDeffault;\n\n\n    }\n\n;\n\n\n    onUpdate() {\n        if (this.news.id) {\n            this._ApiSrvice.getResponsePUT('api/new/modify/' + this.news.id, this.news)\n                .subscribe(\n                    data=> {\n                    if (data.errors)\n                    {\n                        alert(data.errors);\n                    }\n                    else\n                        window.location.replace(\"#/admin/hirek\");\n\n                },\n                    error=> {\n                }\n            )\n\n        }\n        else {\n            this._ApiSrvice.getResponse('api/new/', this.news)\n                .subscribe(\n                    data=> {\n                        console.log(data);\n                        if (data.errors)\n                        {\n\n                            alert(data.errors);\n                        }\n                        else{\n                            console.log(data);\n                           // this.news = data.Hirek;\n                            //this.refreshKepek();\n                            window.location.replace(\"#/admin/hirek\");\n\n                        }\n\n                },\n                    error=> {\n                }\n            )\n        }\n    }\n    onDelete() {\n        var r = confirm(\"Biztosan törlöd az hirekt?!\");\n        if (r == true) {\n            this._ApiSrvice.getResponsePUT('api/new/archive/' + this.news.id, '')\n                .subscribe(\n                    data=> {\n                    window.location.replace(\"#/admin/hirek\");\n\n\n                },\n                    error=> {\n                })\n        }\n    }\n    onModifyIt($event) {\n        this.modifying = $event;\n        //console.log($event);\n        let css = 'selected';\n        if ($event.cssClass == 'selected') css = '';\n\n\n        $event.cssClass = css;\n\n    }\n    ngOnInit() {\n      //todo: ide vissza kell térni mert a route arams máshogyan megy\n\n        this.newsId=+this._RouteParams.snapshot.params['id'];\n        if (this.newsId) {\n            this._ApiSrvice.getResponseGET('api/new/'+this.newsId,'')\n                .subscribe(\n                    data=> {\n                        console.log(data);\n                    this.news=data;\n\n                        this.ckeditorAvaible=true;\n                    //console.log(this.kepek);\n\n\n                },\n                    error=> {\n                        console.log(error);\n                })\n        }\n        else {\n            this.ckeditorAvaible=true;\n        }\n\n    }\n    onDateChanged(event){\n\n        const old =this.news.datum.split(\" \", 2);\n        let newdate=event.date.year+'-'+event.date.month+'-'+event.date.day+' '+old[1];\n        //console.log(newdate);\n        this.news.datum=newdate;\n      //  console.log(event+'---> '+old);\n    }\n    onValueChanged(event) {\n        this.news.content=event;\n\n    }\n}\n"]}