{"version":3,"file":"vasarlasok.component.js","sourceRoot":"","sources":["file:///C:/wamp64/www/ingatlanlotto/winner_front/tmp/broccoli_type_script_compiler-input_base_path-ZnEHOEAm.tmp/0/src/app/views/admin/vasarlasok/vasarlasok.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {Menu,ORDERBYMENU,LIMITMENU} from './dropDownLists';\nimport {APIService} from '../../../globals/services/API.service';\nimport {ErrorService} from '../../../globals/services/error.service';\nimport {GridController} from '../../../globals/TYPES';\nimport {hunkCurrencyPipe} from '../../../globals/pipes/hunkCurrency.pipe';\nimport {markPipe} from '../../../globals/pipes/mark.pipe';\n\n\n@Component({\n    selector: 'vasarlas-lisa',\n    moduleId: module.id,\n    templateUrl: 'vasarlaslista.html',\n    providers: [APIService],\n    styleUrls: [\"\"],\n    directives: [],\n    pipes: [hunkCurrencyPipe, markPipe]\n})\nexport class VasarlasListaComponent implements OnInit {\n    operationMenu:Menu;\n    rightMenu:Menu;\n    orderByMenu:Menu;\n\n    limitMenu:Menu;\n    gridController:GridController;\n    vasarlass:Array<any>;\n    avaiblePages:Array<number>;\n    lastPage:number;\n    licitlineShow:number; //selected licitline\n    searchByText:boolean = false;\n\n    constructor(private _APIService:APIService,\n                private _ErrorService:ErrorService) {\n\n\n        this.orderByMenu = ORDERBYMENU;\n        this.limitMenu = LIMITMENU;\n        this.gridController = {\n            limit: 50,\n            offset: 0,\n            orderBy: {\n                name: 'mind',\n                alias: 'all'\n            },\n            count: -1,\n            currentPage: 1,\n            PageTurnerShowNumberOfPages: 5,\n            searchText: ''\n        };\n    }\n\n\n    ngOnInit() {\n        this.loadList();\n    }\n\n    loadList() {\n        // if (this.gridController.count < 0) this.getCount();\n        let params = '&limit=' + this.gridController.limit + '&offset=' + this.gridController.offset + '&orderBy=' + this.gridController.orderBy.alias+'&search='+this.gridController.searchText;\n\n        let link = 'api/licits/all/' + params;\n\n\n        console.log(link);\n\n\n        this._APIService.getResponseGET(link, '')\n            .subscribe(\n                data=> {\n\n                //console.log(data);\n                this.vasarlass = data.rows;\n                this.gridController.count = data.rowscount;\n                this.setPageTurner();\n\n\n\n            },\n                error=> {\n                console.log(error);\n            }\n        )\n    }\n\n\n    setPageTurner() {\n        let pages = this.gridController.count / this.gridController.limit;\n        this.lastPage = Math.ceil(pages);\n        var avaiblePages = [];\n        let midlePoint = Math.ceil(this.gridController.PageTurnerShowNumberOfPages / 2);\n        let startNumber = 1;\n        if (this.gridController.currentPage > midlePoint) {\n            startNumber = this.gridController.currentPage - midlePoint + 1;\n        }\n        if (this.gridController.currentPage > this.lastPage - midlePoint + 1) {\n            startNumber = this.lastPage - this.gridController.PageTurnerShowNumberOfPages + 1;\n\n        }\n        for (let i = 1; i < this.lastPage + 1; i++) {\n\n            if (i >= startNumber)\n                avaiblePages.push(i);\n            if (avaiblePages.length >= this.gridController.PageTurnerShowNumberOfPages) break;\n        }\n        this.avaiblePages = avaiblePages;\n\n    }\n\n    gotoPage(jump) {\n        if (jump < 1) jump = 1;\n        if (jump > this.lastPage) jump = this.lastPage;\n        this.gridController.currentPage = jump;\n        this.setPageTurner();\n        this.gridController.offset = (jump - 1) * this.gridController.limit;\n        this.loadList();\n\n    }\n\n    menuOpen(menu) {\n        console.log(menu);\n        menu.visible = !menu.visible;\n    }\n\n    changeLimit(limit) {\n        this.gridController.currentPage = Math.ceil(this.gridController.offset / limit);\n\n        this.gridController.limit = limit;\n        this.loadList();\n        this.limitMenu.visible = false;\n\n    }\n\n    changeOrderBy(orderBy) {\n        this.gridController.orderBy = orderBy;\n        this.orderByMenu.visible = false;\n        console.log(this.gridController);\n        this.loadList();\n\n\n    }\n\n    changeOffset(offset) {\n        this.gridController.offset = offset;\n        this.loadList();\n    }\n\n    onsearch(value) {\n        console.log(value);\n        this.gridController.searchText = value;\n        this.loadList();\n\n    }\n\n    runOperation(operation:string) {\n        console.log(operation);\n\n    }\n\n    modify(id) {\n\n        window.location.href = '/#/vasarlasok/modify/' + id;\n    }\n\n    delete(id) {\n        var txt;\n        var r = confirm(\"Biztosan törlöd az vasarlast?!\");\n        if (r == true) {\n            this._APIService.getResponsePUT('api/vasarlas/archive/' + id, '').subscribe(\n                    data=> {\n                    this.loadList();\n                },\n                    error=> {\n                    console.log(error);\n                })\n        } else {\n\n        }\n    }\n\n    showLicits(vasarlasId) {\n        this.licitlineShow = vasarlasId;\n    }\n    befizetesBeErkezett(licit){\n       let current=this.vasarlass[licit];\n        this._APIService.getResponsePUT('api/licits/fizetve/'+current.id+'/', {'jovahagyva':'1','code':current.code}).subscribe(\n                        data=> {\n                            this.vasarlass[licit]=data.rows[0];\n                        console.log(data);\n                    },\n                        error=> {\n                        console.log(error);\n                    })\n    }\n}\n\n\n\n\n\n"]}