{"version":3,"file":"ingatlanlista.component.js","sourceRoot":"","sources":["file:///C:/wamp64/www/ingatlanlotto/winner_front/tmp/broccoli_type_script_compiler-input_base_path-5I6P9bcc.tmp/0/src/app/views/admin/ingatlanok/ingatlanlista.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {Menu,OPERATIONMENU,ORDERBYMENU,LIMITMENU} from './dropDownLists';\nimport {AdminIngatlanHeaderComponent} from \"./header.component\";\nimport {APIService} from '../../../globals/services/API.service';\nimport {ErrorService} from '../../../globals/services/error.service';\nimport {GridController} from '../../../globals/TYPES';\nimport {hunkCurrencyPipe} from '../../../globals/pipes/hunkCurrency.pipe';\nimport {markPipe} from '../../../globals/pipes/mark.pipe';\nimport {IngatlanLicitComponent} from '../ingatlanslicit/ingatlanlicits.component';\nimport { ROUTER_DIRECTIVES } from '@angular/router';\n\n@Component({\n    selector: 'ingatlan-lisa',\n    moduleId: module.id,\n    templateUrl: 'ingatlanlista.component.html',\n    providers: [APIService],\n    styleUrls: [\"ingatlanlista.component.css\"],\n    directives: [AdminIngatlanHeaderComponent,IngatlanLicitComponent,ROUTER_DIRECTIVES],\n    pipes: [hunkCurrencyPipe, markPipe]\n})\nexport class ingatlanListaComponent implements OnInit {\n    operationMenu:Menu;\n    rightMenu:Menu;\n    orderByMenu:Menu;\n\n    limitMenu:Menu;\n    gridController:GridController;\n    ingatlans:Array<any>;\n    avaiblePages:Array<number>;\n    lastPage:number;\n    licitlineShow:number; //selected licitline\n    searchByText:boolean = false;\n\n    constructor(private _APIService:APIService,\n                private _ErrorService:ErrorService) {\n        this.operationMenu = OPERATIONMENU;\n\n        this.orderByMenu = ORDERBYMENU;\n        this.limitMenu = LIMITMENU;\n        this.gridController = {\n            limit: 50,\n            offset: 0,\n            orderBy: {\n                name: 'Rögzítés időpontja',\n                alias: 'id'\n            },\n            count: -1,\n            currentPage: 1,\n            PageTurnerShowNumberOfPages: 5,\n            searchText: ''\n        };\n    }\n\n\n    ngOnInit() {\n        this.loadList();\n    }\n\n    loadList() {\n        if (this.gridController.count < 0) this.getCount();\n        let params = '&limit=' + this.gridController.limit + '&offset=' + this.gridController.offset + '&orderBy=' + this.gridController.orderBy.alias;\n\n        let link = 'api/ingatlans/where=id>0' + params;\n\n\n        //  console.log(link);\n\n\n        this._APIService.getResponseGET(link, '')\n            .subscribe(\n                data=> {\n                console.log(data);\n                this.ingatlans = data;\n                this.setPageTurner();\n\n\n            },\n                error=> {\n                console.log(error);\n            }\n        )\n    }\n\n    private  getCount() {\n        this._APIService.getResponseGET('api/ingatlans/where=id>0&getCount', '')\n            .subscribe(\n                data=> {\n                /*console.log(data);*/\n                this.gridController.count = data;\n\n            },\n                error=> {\n                console.log(error);\n            }\n        )\n\n    }\n\n    setPageTurner() {\n        let pages = this.gridController.count / this.gridController.limit;\n        this.lastPage = Math.ceil(pages);\n        var avaiblePages = [];\n        let midlePoint = Math.ceil(this.gridController.PageTurnerShowNumberOfPages / 2);\n        let startNumber = 1;\n        if (this.gridController.currentPage > midlePoint) {\n            startNumber = this.gridController.currentPage - midlePoint + 1;\n        }\n        if (this.gridController.currentPage > this.lastPage - midlePoint + 1) {\n            startNumber = this.lastPage - this.gridController.PageTurnerShowNumberOfPages + 1;\n\n        }\n        for (let i = 1; i < this.lastPage + 1; i++) {\n\n            if (i >= startNumber)\n                avaiblePages.push(i);\n            if (avaiblePages.length >= this.gridController.PageTurnerShowNumberOfPages) break;\n        }\n        this.avaiblePages = avaiblePages;\n\n    }\n\n    gotoPage(jump) {\n        if (jump < 1) jump = 1;\n        if (jump > this.lastPage) jump = this.lastPage;\n        this.gridController.currentPage = jump;\n        this.setPageTurner();\n        this.gridController.offset = (jump - 1) * this.gridController.limit;\n        this.loadList();\n\n    }\n\n    menuOpen(menu) {\n        console.log(menu);\n        menu.visible = !menu.visible;\n    }\n\n    changeLimit(limit) {\n        this.gridController.currentPage = Math.ceil(this.gridController.offset / limit);\n\n        this.gridController.limit = limit;\n        this.loadList();\n        this.limitMenu.visible = false;\n\n    }\n\n    changeOrderBy(orderBy) {\n        this.gridController.orderBy = orderBy;\n        this.orderByMenu.visible = false;\n        console.log(this.gridController);\n        this.loadList();\n\n\n    }\n\n    changeOffset(offset) {\n        this.gridController.offset = offset;\n        this.loadList();\n    }\n\n    search(value) {\n        this.gridController.searchText = value;\n        this.loadList();\n\n    }\n\n    runOperation(operation:string) {\n        console.log(operation);\n\n    }\n\n    modify(id) {\n\n        window.location.href = '/#/ingatlanok/modify/' + id;\n    }\n\n    delete(id) {\n        var txt;\n        var r = confirm(\"Biztosan törlöd az ingatlant?!\");\n        if (r == true) {\n           this._APIService.getResponsePUT('api/ingatlan/archive/'+id, '').subscribe(\n                           data=> {\n                               this.loadList();\n                       },\n                           error=> {\n                           console.log(error);\n                       })\n        } else {\n\n        }\n    }\n    showLicits(ingatlanId){\n       this.licitlineShow=ingatlanId;\n    }\n}\n\n\n\n\n\n"]}